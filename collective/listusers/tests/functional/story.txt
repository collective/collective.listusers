User story
==========

A scripted walk-through of basic features of collective.listusers.

Prepare
-------

Start by logging-in so we can access @@listusers.

    Go to login screen.
    >>> browser.open(portal.absolute_url() + '/login')

    Fill in your credentials.
    >>> browser.getControl(name='__ac_name').value = TEST_USER_NAME
    >>> browser.getControl(name='__ac_password').value = TEST_USER_PASSWORD

    Click Login button.
    >>> browser.getControl(name='submit').click()

    Are we logged in?
    >>> "You are now logged in" in browser.contents
    True


List some users
---------------

    Go to List Users view.
    >>> browser.open(portal.absolute_url() + '/@@listusers')
    >>> import pdb; pdb.set_trace()

    TODO: continue here when you have changed multiselect widget into a normal
    selection widget
    Select a `Group` to list users from.

    Select `User Attributes` to display in the results.

    Click `List users`.

    Do we see our users?


Clear search criteria
---------------------

    Click `Clear`.

    Nothing should be selected in the `Groups` field.

    Nothing should be selected in the `Users attributes` field.

    There should be no results.


Test validation
---------------

    Since nothing is currently selected, we should get validation errors when
    trying to list users.

    Click `List Users`.

    Check that there are no results.


